; extensions.conf - the Asterisk dial plan
;
; Static extension configuration file, used by
; the pbx_config module. This is where you configure all your
; inbound and outbound calls in Asterisk.
;
; This configuration file is reloaded
; - With the "dialplan reload" command in the CLI
; - With the "reload" command (that reloads everything) in the CLI

[general]
static=yes
writeprotect=n
 
[incoming]
include => internal
include => public_category3

exten => s,1,Answer()
exten => s,2,Background(vm-enter-num-to-call)
exten => s,n,WaitExten(20)

[functii_iax]
exten => 701,1,Answer()
   same => 3,VMAUthenticate(${CALLER(num)}@vmauth)
   same => 4,DISA(no-password|internal)

exten => 702,1,Answer()
   same => 3,Background(prompt-enter-pin) 
   same => 4,Authenticate(1234) 
   same => 5,Playback(auth-ok) 
   same => 6,Dial(IAX2/4331) 

exten => 703,1,Answer()
   same => 2, VoiceMail(112@casuta_vocala) 

exten => 704,1,Answer()
   same => 2,VoiceMailMain(@casuta_vocala) 
   same => 3,PlayBack(vm-goodbye)

[functii-sip]
exten => 611,1, Answer()
   same => 2, SayAlpha(Y+me=*)
   same => 3, Wait(1)
   same => 4, SayDigits(${EXTEN})
   same => 5, Wait(1)
   same => 6, SayNumber(1331,f)
   same => 7, Wait(1)
   same => 8, SayPhonetic(AR)
   same => 9, Wait(1)
   same => 10, SayUnixTime(,UTC-3,kMbdY)

[internal]

exten => 1331,1,Dial(SIP/1331,20)

exten => 2331,1,Dial(SIP/2331,20)

exten => 3331,1,Dial(IAX2/3331,20)

exten => 4331,1,Dial(IAX2/4331,20)

[public_category3]

exten => 4001,1,AgentCallbackLogin(,,${CALLERIDNUM}@internal)

exten => 4002,1,AgentCallbackLogin(,,1)

exten => 4000,1,Queue(markq)
